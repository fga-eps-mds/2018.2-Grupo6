<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Configuração de Ambiente · Integra Vendas</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;O projeto integra-vendas é separado em um backend com microserviços desenvolvidos em django e um frontend mobile, desenvolvido em react-native. Este documento é direcionado ao backend do projeto.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Configuração de Ambiente · Integra Vendas"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fga-eps-mds.github.io/2018.2-Integra-Vendas//2018.2-Integra-Vendas/index.html"/><meta property="og:description" content="&lt;p&gt;O projeto integra-vendas é separado em um backend com microserviços desenvolvidos em django e um frontend mobile, desenvolvido em react-native. Este documento é direcionado ao backend do projeto.&lt;/p&gt;
"/><meta property="og:image" content="https://fga-eps-mds.github.io/2018.2-Integra-Vendas//2018.2-Integra-Vendas/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://fga-eps-mds.github.io/2018.2-Integra-Vendas//2018.2-Integra-Vendas/img/docusaurus.png"/><link rel="shortcut icon" href="/2018.2-Integra-Vendas/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/2018.2-Integra-Vendas/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/2018.2-Integra-Vendas/"><h2 class="headerTitle">Integra Vendas</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/2018.2-Integra-Vendas/docs/tap" target="_self">Docs</a></li><li class=""><a href="/2018.2-Integra-Vendas/docs/sprint0" target="_self">Sprints</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Devops</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Abertura</h3><ul><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/tap">TAP</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/eap">EAP</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/canvas">Canvas</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/roi">ROI</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/evm">EVM</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Projeto</h3><ul><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/plano-metodologico">Plano Metodológico</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/doc-visao">Documento de Visão</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/doc-arquitetura">Documento de Arquitetura</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Métricas</h3><ul><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/riscos">Riscos</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/produtividade">Produtividade</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/conhecimento">Conhecimento</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Roadmaps</h3><ul><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/rm-geral">Roadmap Geral</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/rm-papeis">Roadmap dos papéis</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/rm-produto">Roadmap do Produto</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Design</h3><ul><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/id-visual">Identidade Visual</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/baixa-fidelidade">Baixa Fidelidade</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/alta-fidelidade">Alta Fidelidade</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Devops</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/2018.2-Integra-Vendas/docs/devops-ambiente">Configuração de ambiente</a></li><li class="navListItem"><a class="navItem" href="/2018.2-Integra-Vendas/docs/devops-cicd">Integração contínua</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Configuração de Ambiente</h1></header><article><div><span><p>O projeto integra-vendas é separado em um backend com microserviços desenvolvidos em django e um frontend mobile, desenvolvido em react-native. Este documento é direcionado ao backend do projeto.</p>
<h2><a class="anchor" aria-hidden="true" id="ambientes"></a><a href="#ambientes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ambientes</h2>
<ul>
<li>Desenvolvimento (Docker + Docker-Compose)</li>
<li>Homologação (Heroku)</li>
<li>Produção (Docker + DockerHub + Kubernetes)</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="ambiente-de-desenvolvimento"></a><a href="#ambiente-de-desenvolvimento" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ambiente de Desenvolvimento</h3>
<p>No desenvolvimento é utilizado Docker para isolar o ambiente. O <a href="https://www.docker.com">Docker</a> é uma tecnologia que possibilita isolar um ambiente. Diferente das Máquinas virtuais que tendem a criar um SO completo em cima de outro, o docker propõe um isolamento com foco em dependências e processos, isso diminui a carga sobre o host.</p>
<p>A definição da imagem a ser utilizada pelo container é feita em um Dockerfile, um arquivo de configuração para criação de imagens do docker. Em nosso projeto existem dois Dockerfiles, um para desenvolvimento e outro para produção. Basicamente a diferença entre eles esta nas dependências adicionadas à imagem e no comando que é executado quando se entra no container.</p>
<h3><a class="anchor" aria-hidden="true" id="ambiente-de-homologacão"></a><a href="#ambiente-de-homologacão" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ambiente de Homologação</h3>
<p>O ambiente de homologação é no <a href="https://www.heroku.com/">Heroku</a> pois é uma plataforma Free com recursos limitados, que possibilita verificar já com a configuração de produção como estaria o sistema.</p>
<h3><a class="anchor" aria-hidden="true" id="ambiente-de-producão"></a><a href="#ambiente-de-producão" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ambiente de Produção</h3>
<p>O ambiente de produção ocorre em kubernetes, antes utilizamos o rancher 2.0 no Digital Ocean, porém quando acabou o saldo inicial concedido, migramos para a Google Cloud Platform, que possui o Kubernetes Engine.</p>
<p>As imagens utilizadas em produção são publicadas no DockerHub, um repositórios de imagens docker.</p>
<h2><a class="anchor" aria-hidden="true" id="docker-compose"></a><a href="#docker-compose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker-compose</h2>
<p>É utilizado o <a href="https://docs.docker.com/compose/">docker-compose</a> a fim de facilitar a configuração de portas, volumes e rede do container.</p>
<h2><a class="anchor" aria-hidden="true" id="shell-scripts"></a><a href="#shell-scripts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shell scripts</h2>
<p>A fim de executar um conjunto de comandos, tanto em desenvolvimento quanto a fim de otimizar os arquivos de CI, são utilizados scripts.</p>
<h2><a class="anchor" aria-hidden="true" id="makefile"></a><a href="#makefile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Makefile</h2>
<p>A fim de facilitar a utilização de comandos padrões para realizar as atividades de iniciar o sistema, entrar no container, rodar testes, etc. É utilizado o Makefile.</p>
<h2><a class="anchor" aria-hidden="true" id="variaveis-de-ambiente"></a><a href="#variaveis-de-ambiente" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variáveis de Ambiente</h2>
<p>De acordo com <a href="https://12factor.net/pt_br/">Os 12 Fatores</a>, que uma de suas propostas é a utilização de variáveis de ambiente. É utilizado um arquivo .env para guardar as configurações necessárias para se executar o sistema. O arquivo .env não é adicionado ao repositório, a fim de manter secreta as informações de configuração. Ainda sim são definidos valores padrões para desenvolvimento que permitem o levantamento do sistema sem que seja necessário definir tais variáveis, facilitando a vida dos desenvolvedores.</p>
<h2><a class="anchor" aria-hidden="true" id="dependencias-separadas-por-ambiente"></a><a href="#dependencias-separadas-por-ambiente" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependências separadas por ambiente</h2>
<p>É utilizado arquivos de dependências distintos para os diferentes ambientes, sendo desenvolvimento, produção e heroku. Heroku utiliza as dependências de produção porém é adicionado também o gunicorn.</p>
<p>As dependências se localizam dentro da pasta requirements/ e se dividem entre, base.txt, dev.txt e prod.txt. Onde base.txt se localizam as dependências essenciais para o projeto funcionar. O arquivo dev.txt guarda dependências de profile, tests etc... E prod.txt, por enquanto vazio, guarda configurações de produção.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/2018.2-Integra-Vendas/docs/alta-fidelidade"><span class="arrow-prev">← </span><span>Alta Fidelidade</span></a><a class="docs-next button" href="/2018.2-Integra-Vendas/docs/devops-cicd"><span>Integração contínua</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#ambientes">Ambientes</a><ul class="toc-headings"><li><a href="#ambiente-de-desenvolvimento">Ambiente de Desenvolvimento</a></li><li><a href="#ambiente-de-homologacão">Ambiente de Homologação</a></li><li><a href="#ambiente-de-producão">Ambiente de Produção</a></li></ul></li><li><a href="#docker-compose">Docker-compose</a></li><li><a href="#shell-scripts">Shell scripts</a></li><li><a href="#makefile">Makefile</a></li><li><a href="#variaveis-de-ambiente">Variáveis de Ambiente</a></li><li><a href="#dependencias-separadas-por-ambiente">Dependências separadas por ambiente</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/2018.2-Integra-Vendas/" class="nav-home"></a><div><h5>Docs</h5><a href="/2018.2-Integra-Vendas/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/2018.2-Integra-Vendas/docs/en/doc2.html">Guides (or other categories)</a><a href="/2018.2-Integra-Vendas/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/2018.2-Integra-Vendas/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/2018.2-Integra-Vendas/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/2018.2-Integra-Vendas/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Integra Vendas</section></footer></div></body></html>